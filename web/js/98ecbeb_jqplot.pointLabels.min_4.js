(function(h){h.jqplot.PointLabels=function(a){this.show=h.jqplot.config.enablePlugins;this.location="n";this.labelsFromSeries=false;this.seriesLabelIndex=null;this.labels=[];this._labels=[];this.stackedValue=false;this.ypadding=6;this.xpadding=6;this.escapeHTML=true;this.edgeTolerance=-5;this.formatter=h.jqplot.DefaultTickFormatter;this.formatString="";this.hideZeros=false;this._elems=[];h.extend(true,this,a)};var f=["nw","n","ne","e","se","s","sw","w"];var g={nw:0,n:1,ne:2,e:3,se:4,s:5,sw:6,w:7};var e=["se","s","sw","w","nw","n","ne","e"];h.jqplot.PointLabels.init=function(a,c,k,d,b){var l=h.extend(true,{},k,d);l.pointLabels=l.pointLabels||{};if(this.renderer.constructor===h.jqplot.BarRenderer&&this.barDirection==="horizontal"&&!l.pointLabels.location){l.pointLabels.location="e"}this.plugins.pointLabels=new h.jqplot.PointLabels(l.pointLabels);this.plugins.pointLabels.setLabels.call(this)};h.jqplot.PointLabels.prototype.setLabels=function(){var c=this.plugins.pointLabels;var a;if(c.seriesLabelIndex!=null){a=c.seriesLabelIndex}else{if(this.renderer.constructor===h.jqplot.BarRenderer&&this.barDirection==="horizontal"){a=0}else{a=(this._plotData.length===0)?0:this._plotData[0].length-1}}c._labels=[];if(c.labels.length===0||c.labelsFromSeries){if(c.stackedValue){if(this._plotData.length&&this._plotData[0].length){for(var d=0;d<this._plotData.length;d++){c._labels.push(this._plotData[d][a])}}}else{var b=this.data;if(this.renderer.constructor===h.jqplot.BarRenderer&&this.waterfall){b=this._data}if(b.length&&b[0].length){for(var d=0;d<b.length;d++){c._labels.push(b[d][a])}}b=null}}else{if(c.labels.length){c._labels=c.labels}}};h.jqplot.PointLabels.prototype.xOffset=function(c,d,b){d=d||this.location;b=b||this.xpadding;var a;switch(d){case"nw":a=-c.outerWidth(true)-this.xpadding;break;case"n":a=-c.outerWidth(true)/2;break;case"ne":a=this.xpadding;break;case"e":a=this.xpadding;break;case"se":a=this.xpadding;break;case"s":a=-c.outerWidth(true)/2;break;case"sw":a=-c.outerWidth(true)-this.xpadding;break;case"w":a=-c.outerWidth(true)-this.xpadding;break;default:a=-c.outerWidth(true)-this.xpadding;break}return a};h.jqplot.PointLabels.prototype.yOffset=function(c,d,b){d=d||this.location;b=b||this.xpadding;var a;switch(d){case"nw":a=-c.outerHeight(true)-this.ypadding;break;case"n":a=-c.outerHeight(true)-this.ypadding;break;case"ne":a=-c.outerHeight(true)-this.ypadding;break;case"e":a=-c.outerHeight(true)/2;break;case"se":a=this.ypadding;break;case"s":a=this.ypadding;break;case"sw":a=this.ypadding;break;case"w":a=-c.outerHeight(true)/2;break;default:a=-c.outerHeight(true)-this.ypadding;break}return a};h.jqplot.PointLabels.draw=function(c,R,i){var F=this.plugins.pointLabels;F.setLabels.call(this);for(var d=0;d<F._elems.length;d++){F._elems[d].emptyForce()}F._elems.splice(0,F._elems.length);if(F.show){var J="_"+this._stackAxis+"axis";if(!F.formatString){F.formatString=this[J]._ticks[0].formatString;F.formatter=this[J]._ticks[0].formatter}var p=this._plotData;var H=this._prevPlotData;var M=this._xaxis;var L=this._yaxis;var a,U;for(var d=0,l=F._labels.length;d<l;d++){var N=F._labels[d];if(F.hideZeros&&parseInt(F._labels[d],10)==0){N=""}if(N!=null){N=F.formatter(F.formatString,N)}U=document.createElement("div");F._elems[d]=h(U);a=F._elems[d];a.addClass("jqplot-point-label jqplot-series-"+this.index+" jqplot-point-"+d);a.css("position","absolute");a.insertAfter(c.canvas);if(F.escapeHTML){a.text(N)}else{a.html(N)}var T=F.location;if((this.fillToZero&&p[d][1]<0)||(this.fillToZero&&this._type==="bar"&&this.barDirection==="horizontal"&&p[d][0]<0)||(this.waterfall&&parseInt(N,10))<0){T=e[g[T]]}var O=M.u2p(p[d][0])+F.xOffset(a,T);var S=L.u2p(p[d][1])+F.yOffset(a,T);if(this._stack&&!F.stackedValue){if(this.barDirection==="vertical"){S=(this._barPoints[d][0][1]+this._barPoints[d][1][1])/2+i._gridPadding.top-0.5*a.outerHeight(true)}else{O=(this._barPoints[d][2][0]+this._barPoints[d][0][0])/2+i._gridPadding.left-0.5*a.outerWidth(true)}}if(this.renderer.constructor==h.jqplot.BarRenderer){if(this.barDirection=="vertical"){O+=this._barNudge}else{S-=this._barNudge}}a.css("left",O);a.css("top",S);var Q=O+a.width();var G=S+a.height();var I=F.edgeTolerance;var V=h(c.canvas).position().left;var b=h(c.canvas).position().top;var K=c.canvas.width+V;var P=c.canvas.height+b;if(O-I<V||S-I<b||Q+I>K||G+I>P){a.remove()}a=null;U=null}}};h.jqplot.postSeriesInitHooks.push(h.jqplot.PointLabels.init);h.jqplot.postDrawSeriesHooks.push(h.jqplot.PointLabels.draw)})(jQuery);